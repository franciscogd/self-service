<?xml version="1.0" encoding="UTF-8"?>
<!--
// ============================================================================
//
// Copyright (C) 2011 - 2012 Talend Inc. - www.talend.com
//
// This source code is available under agreement available at
// %InstallDIR%\license.txt
//
// You should have received a copy of the agreement
// along with this program; if not, write to Talend SA
// 9 rue Pages 92150 Suresnes, France
//
// ============================================================================
-->
<features name="tesb-ee-6.2.1" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

    <feature name='tesb-update-component' version='6.2.1'>
        <bundle>mvn:org.talend.esb.update/core/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.update/command/6.2.1</bundle>
    </feature>

    <!-- Don't support install TIDM server into TESB container for 5.3 version -->
    <!--feature name='tidm-server' version='6.2.1'>
        <feature>war</feature>
        <bundle>mvn:org.springframework.security/spring-security-core/3.2.7.RELEASE</bundle> 
        <bundle>mvn:org.springframework.security/spring-security-config/3.2.7.RELEASE</bundle>
        <bundle>mvn:org.springframework.security/spring-security-web/3.2.7.RELEASE</bundle> 
        <bundle>war:mvn:org.talend.esb.tidm/core/6.2.1/war</bundle>
    </feature>
    
    <feature name='tidm-console' version='6.2.1'>
        <feature>war</feature>
        <bundle>war:mvn:org.talend.esb.tidm/console/6.2.1/war</bundle>
    </feature-->
    
    <feature name='tesb-sts-tidm' version='6.2.1'>
        <configfile finalname="/etc/keystores/stsKeystore.properties">mvn:org.talend.esb.sts/org.talend.esb.sts.tidm.config/6.2.1/properties/stsKeystore</configfile>
        <configfile finalname="/etc/keystores/stsstore.jks">mvn:org.talend.esb.sts/org.talend.esb.sts.tidm.config/6.2.1/jks/stsstore</configfile>
        <feature prerequisite="true">cxf-sts</feature>
        <feature prerequisite="true">cxf-rs-security-xml</feature>
        <feature prerequisite="true">cxf-rt-security</feature>
        <feature>tesb-xacml-rt</feature>
        <feature>tesb-xacml-syncope</feature>
        <bundle>mvn:org.talend.esb.sts/org.talend.esb.sts.tidm.config/6.2.1</bundle>
    </feature>

    <feature name='tesb-all' version='6.2.1'>
        <feature>tesb-datasource-derby</feature>
        <feature>tesb-derby-starter</feature>
        <feature>tesb-sam-server</feature>
        <feature>tesb-sam-service-soap</feature>
        <feature>tesb-sam-service-rest</feature>
        <feature>tesb-zookeeper-server</feature>
        <feature>tesb-registry-rest-atom-service</feature>
        <feature>tesb-registry-rest-service</feature>
        <feature>tesb-registry-server-commands</feature>
        <feature>tesb-xacmlregistry-rest-atom-service</feature>
        <feature>tesb-xacml-pdp</feature>
        <feature>cxf-xkms-service</feature>
        <feature>tesb-aux</feature>
		<feature>tesb-provisioning-server</feature>
		<feature>tesb-provisioning-agent</feature>
    </feature>

    <feature name='tesb-sts-switcher' version='6.2.1'>
        <bundle>mvn:org.talend.esb.ee/sts-commands/6.2.1</bundle>
    </feature>

    <feature name='tesb-xkms-crypto-config' version='6.2.1'>
        <configfile finalname="esbrepo/xkms/certificates/trusted_cas/stskey.cer">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cer/stskey</configfile>
        <configfile finalname="esbrepo/xkms/certificates/trusted_cas/servicekey.cer">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cer/servicekey</configfile>
        <configfile finalname="esbrepo/xkms/certificates/trusted_cas/clientkey.cer">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cer/clientkey</configfile>
        <configfile finalname="esbrepo/xkms/certificates/trusted_cas/crmservice.cer">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cer/crmservice</configfile>
        <configfile finalname="esbrepo/xkms/certificates/trusted_cas/reservationservice.cer">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cer/reservationservice</configfile>
        <configfile finalname="esbrepo/xkms/certificates/trusted_cas/demoservice.cer">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cer/demoservice</configfile>
        <configfile finalname="etc/org.talend.esb.job.service.http_www_talend_org_service_DemoService.cfg">mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1/cfg/org.talend.esb.job.service.http_www_talend_org_service_DemoService</configfile>
        <bundle>mvn:org.talend.esb.ee/xkms-crypto-config/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.ee/tesb-security-runtime/6.2.1</bundle>
    </feature>

    <feature name='tesb-jms-transport-enterprise' version='6.2.1'>
        <bundle>mvn:org.talend.esb/tesb-jms-transport-enterprise/6.2.1</bundle>
    </feature>

  <feature name='camel-mongodb-gridfs' version='2.16.3' start-level='50'>
    <feature version='2.16.3'>camel-core</feature>
    <feature version='2.16.3'>camel-jackson</feature>
    <bundle dependency='true'>mvn:org.mongodb/mongo-java-driver/3.2.2</bundle>
    <bundle>mvn:org.apache.camel/camel-mongodb-gridfs/2.16.3</bundle>
  </feature>

  <feature name='camel-wmq' version='2.16.3'>
    <feature version='2.16.3'>camel</feature>
    <bundle>mvn:org.apache-extras.camel-extra/camel-wmq/2.16.3</bundle>
  </feature>

</features>