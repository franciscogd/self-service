<?xml version="1.0" encoding="UTF-8"?>
<!--
// ============================================================================
//
// Copyright (C) 2011 - 2013 Talend Inc. - www.talend.com
//
// This source code is available under agreement available at
// %InstallDIR%\license.txt
//
// You should have received a copy of the agreement
// along with this program; if not, write to Talend SA
// 9 rue Pages 92150 Suresnes, France
//
// ============================================================================
-->
<features name="tesb-registry-6.2.1" xmlns="http://karaf.apache.org/xmlns/features/v1.0.0">

    <repository>mvn:org.apache.cxf.karaf/apache-cxf/3.1.5/xml/features</repository>

    <feature name='jackrabbit-registry-bundles' version='6.2.1'>
        <bundle>mvn:commons-collections/commons-collections/3.2.2</bundle>
        <bundle>mvn:commons-io/commons-io/2.2</bundle>
        <!-- <bundle>mvn:commons-dbcp/commons-dbcp/1.4</bundle> -->
        <bundle>mvn:commons-pool/commons-pool/1.6</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.derby/10.8.1.2_1</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.concurrent/1.3.4_1</bundle>
        <bundle>mvn:org.apache.tika/tika-core/1.3</bundle>
        <bundle>mvn:javax.jcr/jcr/2.0</bundle>
        <bundle>mvn:org.apache.jackrabbit/jackrabbit-api/2.10.1</bundle>
        <!-- <bundle>wrap:mvn:org.apache.jackrabbit/jackrabbit-core/2.10.1$Require-Bundle=derby</bundle> -->
		<bundle>mvn:org.apache.jackrabbit/jackrabbit-data/2.10.1</bundle>
        <bundle>mvn:org.apache.jackrabbit/jackrabbit-jcr-commons/2.10.1</bundle>
        <bundle>mvn:org.apache.jackrabbit/jackrabbit-jcr-rmi/2.10.1</bundle>
        <bundle>mvn:org.apache.jackrabbit/jackrabbit-spi/2.10.1</bundle>
        <bundle>mvn:org.apache.jackrabbit/jackrabbit-spi-commons/2.10.1</bundle>
    </feature>

    <feature name='tesb-registry-validation-bundles' version='6.2.1'>
        <bundle>mvn:org.apache.velocity/velocity/1.7</bundle>
        <bundle>mvn:org.apache.cxf/cxf-tools-common/3.1.5</bundle>
        <bundle>mvn:org.apache.cxf/cxf-tools-validator/3.1.5</bundle>
    </feature>

    <feature name='tesb-registry-server' version='6.2.1'>
        <configfile finalname="/etc/org.talend.esb.registry.server.cfg">mvn:org.talend.esb.registry/registry-server/6.2.1/cfg/org.talend.esb.registry.server</configfile>
        <configfile finalname="/esbrepo/serviceregistry/repository.xml">mvn:org.talend.esb.registry/registry-server/6.2.1/xml/repository</configfile>
        <configfile finalname="/etc/org.talend.esb.registry.repo.xml">mvn:org.talend.esb.registry/registry-server/6.2.1/xml/org.talend.esb.registry.repo</configfile>
        <feature>jackrabbit-registry-bundles</feature>
        <feature>tesb-registry-validation-bundles</feature>
        <bundle>mvn:org.talend.esb.registry/registry-common/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-server/6.2.1</bundle>
    </feature>

    <feature name='tesb-registry-server-commands' version='6.2.1'>
        <feature>tesb-registry-server</feature>
        <bundle>mvn:org.talend.esb.registry/registry-server-commands/6.2.1</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jdom/1.1_4</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.rome/1.0_3</bundle>
    </feature>

    <feature name='tesb-registry-rest-service' version='6.2.1'>
        <configfile finalname="/etc/org.talend.esb.registry.service.lookup.cfg">mvn:org.talend.esb.registry/registry-rest-service/6.2.1/cfg/org.talend.esb.registry.service.lookup</configfile>
        <feature>cxf-rs-security-xml</feature>
        <feature version='6.2.1'>tesb-security-common</feature>
        <feature>tesb-registry-server</feature>
        <bundle>mvn:org.talend.esb.registry/registry-rest-security/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-rest-service/6.2.1</bundle>
    </feature>

    <feature name='tesb-registry-rest-atom-service' version='6.2.1'>
        <configfile finalname="/etc/org.talend.esb.registry.service.admin.cfg">mvn:org.talend.esb.registry/registry-rest-atom-service/6.2.1/cfg/org.talend.esb.registry.service.admin</configfile>
        <feature>cxf-rs-security-xml</feature>
        <feature version='6.2.1'>tesb-security-common</feature>
        <feature>tesb-registry-server</feature>
        <feature>cxf-abdera</feature>
        <bundle>mvn:org.talend.esb.registry/registry-rest-security/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-rest-atom-service/6.2.1</bundle>
    </feature>

    <feature name='tesb-registry-wsdl-client' version='6.2.1' start-level='50'>
        <configfile finalname="/etc/org.talend.esb.registry.client.wsdl.cfg">mvn:org.talend.esb.registry/registry-wsdl-client/6.2.1/cfg/org.talend.esb.registry.client.wsdl</configfile>
        <feature>cxf-rs-security-xml</feature>
        <feature version='6.2.1'>tesb-security-common</feature>
        <feature version='6.2.1'>tesb-locator-client</feature>
        <bundle>mvn:org.talend.esb.registry/registry-common/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-rest-security/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-client-common/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-wsdl-client/6.2.1</bundle>
    </feature>

    <feature name='tesb-registry-policy-client' version='6.2.1' start-level='50'>
        <configfile finalname="/etc/org.talend.esb.registry.client.policy.cfg">mvn:org.talend.esb.registry/registry-policy-client/6.2.1/cfg/org.talend.esb.registry.client.policy</configfile>
        <feature>cxf-rs-security-xml</feature>
        <feature version='6.2.1'>tesb-security-common</feature>
        <bundle>mvn:org.talend.esb.registry/registry-common/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-rest-security/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-client-common/6.2.1</bundle>
        <bundle>mvn:org.talend.esb.registry/registry-policy-client/6.2.1</bundle>
    </feature>

</features>
